let $ee096d6f5d25ea16$var$hideAlert=()=>{let e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},$ee096d6f5d25ea16$var$showAlert=(e,t)=>{$ee096d6f5d25ea16$var$hideAlert();let a=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),setTimeout($ee096d6f5d25ea16$var$hideAlert,5e3)};var $ee096d6f5d25ea16$export$2e2bcd8739ae039=$ee096d6f5d25ea16$var$showAlert;let $b687e91076c76d1a$var$baseUrl="/api/v1/auth/",$b687e91076c76d1a$export$6503ec6e8aabbaf=async e=>{try{let{username:t,name:a,email:r,password:o,passwordConfirm:d}=e,n=await fetch(`${$b687e91076c76d1a$var$baseUrl}register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,name:a,email:r,password:o,passwordConfirm:d})}),s=await n.json();if(!n.ok)throw Error(s.message||"Something went wrong");$ee096d6f5d25ea16$export$2e2bcd8739ae039("success",s.message),setTimeout(()=>{location.assign("/messages")},2e3)}catch(e){$ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message)}},$b687e91076c76d1a$export$596d806903d1f59e=async e=>{try{let{email:t,password:a}=e,r=await fetch(`${$b687e91076c76d1a$var$baseUrl}login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}),o=await r.json();if(!r.ok)throw Error(o.message||"Something went wrong");$ee096d6f5d25ea16$export$2e2bcd8739ae039("success",o.message),setTimeout(()=>{location.assign("/messages")},1500)}catch(e){$ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message)}},$b687e91076c76d1a$export$a0973bcfe11b05c9=async()=>{try{let e=await fetch(`${$b687e91076c76d1a$var$baseUrl}logout`);if(!e.ok){let t=await e.json();throw Error(t.message||"Something went wrong")}location.assign("/login")}catch(e){$ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message)}},$b687e91076c76d1a$export$c25772193061cdc4=async e=>{try{let{email:t,purpose:a}=e,r=await fetch(`${$b687e91076c76d1a$var$baseUrl}send-otp/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),o=await r.json();if(!r.ok&&"Password Recovery"===a)throw Error(o.message);return $ee096d6f5d25ea16$export$2e2bcd8739ae039("success",o.message),!0}catch(e){return $ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message),!1}},$b687e91076c76d1a$export$c3b3fc23617030d9=async e=>{try{let{email:t,otp:a,purpose:r}=e,o=await fetch(`${$b687e91076c76d1a$var$baseUrl}verify-otp/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,otp:a,purpose:r})}),d=await o.json();if(!o.ok)throw Error(d.message);return $ee096d6f5d25ea16$export$2e2bcd8739ae039("success",d.message),!0}catch(e){return $ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message),!1}},$b687e91076c76d1a$export$dc726c8e334dd814=async e=>{try{let{email:t,otp:a,password:r,passwordConfirm:o}=e,d=await fetch(`${$b687e91076c76d1a$var$baseUrl}reset-password`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,otp:a,password:r,passwordConfirm:o})}),n=await d.json();if(!d.ok)throw Error(n.message);$ee096d6f5d25ea16$export$2e2bcd8739ae039("success",n.message),setTimeout(()=>location.assign("/"),1500)}catch(e){$ee096d6f5d25ea16$export$2e2bcd8739ae039("error",e.message)}},$d99ef5bf8c819fff$export$bfd05f27ae9a60c8=e=>Array.from(e).map(e=>e.value).join(""),$d99ef5bf8c819fff$export$71f81187a0d45720=e=>{e.forEach((t,a)=>{t.addEventListener("paste",t=>{t.preventDefault();let a=t.clipboardData.getData("text").trim();/^\d{6}$/.test(a)&&(a.split("").forEach((t,a)=>{e[a]&&(e[a].value=t)}),e[5].focus())}),t.addEventListener("input",t=>{let r=t.target.value.replace(/\D/g,"");t.target.value=r,1===t.target.value.length&&a<e.length-1&&e[a+1].focus()}),t.addEventListener("keydown",t=>{"Backspace"===t.key&&a>0&&!t.target.value&&e[a-1].focus()})})},$d99ef5bf8c819fff$export$40efe2e6d17e1594=async(e,t)=>await $b687e91076c76d1a$export$c25772193061cdc4({email:e,purpose:"Password Recovery"}),$d99ef5bf8c819fff$export$69b95efb667597b5=async(e,t)=>await $b687e91076c76d1a$export$c3b3fc23617030d9({email:e,otp:t,purpose:"Password Recovery"}),$d99ef5bf8c819fff$export$b1fe3b9ccb29d6b5=async(e,t)=>{let a=document.getElementById("password").value,r=document.getElementById("password-confirm").value;await $b687e91076c76d1a$export$dc726c8e334dd814({email:e,otp:t,password:a,passwordConfirm:r})},$d99ef5bf8c819fff$export$1ad018ea9ed1d4c7=(e,t)=>{let a=60;e.disabled=!0,t.textContent=`(${a})`;let r=setInterval(()=>{a--,t.textContent=`(${a})`,a<=0&&(clearInterval(r),e.disabled=!1,t.textContent="")},1e3)},$db822e8f11f6ca30$var$registerForm=document.querySelector(".form--register"),$db822e8f11f6ca30$var$loginForm=document.querySelector(".form--login"),$db822e8f11f6ca30$var$logoutBtn=document.querySelector(".nav__el--logout"),$db822e8f11f6ca30$var$copyBtn=document.getElementById("copyBtn"),$db822e8f11f6ca30$var$forgotPasswordBtn=document.querySelector(".btn-sendOtp");$db822e8f11f6ca30$var$registerForm&&$db822e8f11f6ca30$var$registerForm.addEventListener("submit",async e=>{e.preventDefault();let t=document.querySelector(".btn--register");t.textContent="Please wait....";let a=document.getElementById("username").value,r=document.getElementById("name").value,o=document.getElementById("email").value,d=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await $b687e91076c76d1a$export$6503ec6e8aabbaf({username:a,name:r,email:o,password:d,passwordConfirm:n}),t.textContent="Register"}),$db822e8f11f6ca30$var$loginForm&&$db822e8f11f6ca30$var$loginForm.addEventListener("submit",async e=>{e.preventDefault();let t=document.querySelector(".btn--login");t.textContent="Please wait....";let a=document.getElementById("email").value,r=document.getElementById("password").value;await $b687e91076c76d1a$export$596d806903d1f59e({email:a,password:r}),t.textContent="Login"}),$db822e8f11f6ca30$var$logoutBtn&&$db822e8f11f6ca30$var$logoutBtn.addEventListener("click",$b687e91076c76d1a$export$a0973bcfe11b05c9),$db822e8f11f6ca30$var$copyBtn&&$db822e8f11f6ca30$var$copyBtn.addEventListener("click",()=>{let e=document.getElementById("profileLink");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),document.getElementById("copyBtn").textContent="Copied!",setTimeout(()=>document.getElementById("copyBtn").textContent="Copy",1500)}),$db822e8f11f6ca30$var$forgotPasswordBtn&&$db822e8f11f6ca30$var$forgotPasswordBtn.addEventListener("click",async()=>{let e=document.getElementById("email");if(e.checkValidity())e.classList.remove("is-invalid");else{e.classList.add("is-invalid"),e.reportValidity();return}let t=e.value.trim();$db822e8f11f6ca30$var$forgotPasswordBtn.textContent="Sending....";let a=await $d99ef5bf8c819fff$export$40efe2e6d17e1594(t,"Password Recovery");if($db822e8f11f6ca30$var$forgotPasswordBtn.textContent="Send OTP",a){let a=new bootstrap.Modal(document.getElementById("otpModal"));a.show();let r=document.getElementById("resendOtpBtn");r.replaceWith(r.cloneNode(!0)),r=document.getElementById("resendOtpBtn");let o=document.getElementById("countdown");$d99ef5bf8c819fff$export$1ad018ea9ed1d4c7(r,o);let d=document.querySelectorAll(".otp-input");$d99ef5bf8c819fff$export$71f81187a0d45720(d),r.addEventListener("click",async()=>{r.disabled=!0,r.textContent="Resending....";let t=e.value.trim();await $d99ef5bf8c819fff$export$40efe2e6d17e1594(t,"Password Recovery")?$d99ef5bf8c819fff$export$1ad018ea9ed1d4c7(r,o):(r.textContent="Resend OTP",r.disabled=!1)});let n=document.getElementById("verifyOtpBtn");n.replaceWith(n.cloneNode(!0)),(n=document.getElementById("verifyOtpBtn")).addEventListener("click",async()=>{let e=!0;if(Array.from(d).forEach(t=>{""===t.value.trim()?(t.classList.add("is-invalid"),e=!1):t.classList.remove("is-invalid")}),!e)return;n.textContent="Verifying....";let r=$d99ef5bf8c819fff$export$bfd05f27ae9a60c8(d),o=await $d99ef5bf8c819fff$export$69b95efb667597b5(t,r);if(n.textContent="Verify OTP",o){a.hide(),new bootstrap.Modal(document.getElementById("resetModal")).show();let e=document.querySelector(".form--reset-password");e.replaceWith(e.cloneNode(!0)),(e=document.querySelector(".form--reset-password")).addEventListener("submit",async e=>{e.preventDefault(),await $d99ef5bf8c819fff$export$b1fe3b9ccb29d6b5(t,r)})}})}});
//# sourceMappingURL=index.js.map
